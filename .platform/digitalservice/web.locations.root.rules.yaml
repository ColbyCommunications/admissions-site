###
# Override rules for the root (/) web location. See https://docs.platform.sh/configuration/app/web.html#rules
###

################################
###          CORE           ###
###############################
        # Allow access to common static files.
        '(?<!lock)\.(?i:jpe?g|gif|png|svg|bmp|ico|css|js(?:on)?|eot|ttf|woff|woff2|pdf|docx?|xlsx?|pp[st]x?|psd|odt|key|mp[2-5g]|m4[av]|og[gv]|wav|mov|wm[av]|avi|3g[p2])$':
          allow: true
        '^/robots\.txt$':
          allow: true
        '^/sitemap\.xml$':
          allow: true
#reserved


################################
###        WORDPRESS        ###
###############################
        # We need to allow requests to wp-login.php to pass through
        # Multi domain multisites do not respect the WP_SITEURL constant in Wp-config. Since the vast majority of
        # migrated multisites were not set up using this constant, their siteurl location is hard-coded into the db
        # Because of this, WordPress and plugins are unaware that core files are located in /wp/. This allows those
        # sites to continue to function properly, and single sites are unaffected as they respect the WP_SITEURL
        # constant. New multisites set up with the new paradigm will have their siteurl setting set correctly and will
        # also not be affected by this setting.
        '^\/wp-login.php$':
          allow: true
          scripts: true
          passthru: '/wp/wp-login.php'

################################
###     Project Specific    ###
###############################
# Add any additional project specific root override rules after this line